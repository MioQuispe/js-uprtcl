<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Loading MicroModules | The Underscore Protocol</title>
    <meta name="description" content="Documentation site for the _Prtcl">
    <meta name="generator" content="VuePress 1.3.1">
    <link rel="icon" type="image/png" href="/js-uprtcl/favicon.png">
    
    <link rel="preload" href="/js-uprtcl/assets/css/0.styles.40a2b895.css" as="style"><link rel="preload" href="/js-uprtcl/assets/js/app.bc6e032e.js" as="script"><link rel="preload" href="/js-uprtcl/assets/js/2.9a3fecf1.js" as="script"><link rel="preload" href="/js-uprtcl/assets/js/18.a2ee037d.js" as="script"><link rel="prefetch" href="/js-uprtcl/assets/js/10.2aeedd5b.js"><link rel="prefetch" href="/js-uprtcl/assets/js/11.6e34884f.js"><link rel="prefetch" href="/js-uprtcl/assets/js/12.ad8b83c3.js"><link rel="prefetch" href="/js-uprtcl/assets/js/13.55e08e70.js"><link rel="prefetch" href="/js-uprtcl/assets/js/14.91fad0c9.js"><link rel="prefetch" href="/js-uprtcl/assets/js/15.96885a09.js"><link rel="prefetch" href="/js-uprtcl/assets/js/16.1d8b8264.js"><link rel="prefetch" href="/js-uprtcl/assets/js/17.56990f86.js"><link rel="prefetch" href="/js-uprtcl/assets/js/19.e701a858.js"><link rel="prefetch" href="/js-uprtcl/assets/js/20.183447fd.js"><link rel="prefetch" href="/js-uprtcl/assets/js/21.11ed72b0.js"><link rel="prefetch" href="/js-uprtcl/assets/js/22.2346c8fd.js"><link rel="prefetch" href="/js-uprtcl/assets/js/23.37f10dd4.js"><link rel="prefetch" href="/js-uprtcl/assets/js/24.5efcd1b3.js"><link rel="prefetch" href="/js-uprtcl/assets/js/25.68bca7fd.js"><link rel="prefetch" href="/js-uprtcl/assets/js/26.ea822e9f.js"><link rel="prefetch" href="/js-uprtcl/assets/js/27.6cbacf6f.js"><link rel="prefetch" href="/js-uprtcl/assets/js/28.11b7d43d.js"><link rel="prefetch" href="/js-uprtcl/assets/js/29.52e7e015.js"><link rel="prefetch" href="/js-uprtcl/assets/js/3.79262c65.js"><link rel="prefetch" href="/js-uprtcl/assets/js/30.e0095fbf.js"><link rel="prefetch" href="/js-uprtcl/assets/js/31.29c932a2.js"><link rel="prefetch" href="/js-uprtcl/assets/js/32.7147fa5e.js"><link rel="prefetch" href="/js-uprtcl/assets/js/33.e75074b2.js"><link rel="prefetch" href="/js-uprtcl/assets/js/34.3bad811d.js"><link rel="prefetch" href="/js-uprtcl/assets/js/35.08d16d30.js"><link rel="prefetch" href="/js-uprtcl/assets/js/36.c566812b.js"><link rel="prefetch" href="/js-uprtcl/assets/js/37.d0071fa5.js"><link rel="prefetch" href="/js-uprtcl/assets/js/38.c03b61b3.js"><link rel="prefetch" href="/js-uprtcl/assets/js/39.402948dc.js"><link rel="prefetch" href="/js-uprtcl/assets/js/4.37584ff7.js"><link rel="prefetch" href="/js-uprtcl/assets/js/5.7c3f7522.js"><link rel="prefetch" href="/js-uprtcl/assets/js/6.8b367ebb.js"><link rel="prefetch" href="/js-uprtcl/assets/js/7.bf45ded8.js"><link rel="prefetch" href="/js-uprtcl/assets/js/8.d8c5d1e5.js"><link rel="prefetch" href="/js-uprtcl/assets/js/9.9c545576.js">
    <link rel="stylesheet" href="/js-uprtcl/assets/css/0.styles.40a2b895.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/js-uprtcl/" class="home-link router-link-active"><img src="/js-uprtcl/logo.png" alt="The Underscore Protocol" class="logo"> <span class="site-name can-hide">The Underscore Protocol</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <nav class="nav-links can-hide"><div class="nav-item"><a href="/js-uprtcl/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/js-uprtcl/guides/" class="nav-link router-link-active">
  Guides
</a></div><div class="nav-item"><a href="/js-uprtcl/modules/" class="nav-link">
  Modules
</a></div><div class="nav-item"><a href="/js-uprtcl/resources/" class="nav-link">
  Resources
</a></div><div class="nav-item"><a href="https://github.com/uprtcl/js-uprtcl" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><nav class="nav-links"><div class="nav-item"><a href="/js-uprtcl/" class="nav-link">
  Home
</a></div><div class="nav-item"><a href="/js-uprtcl/guides/" class="nav-link router-link-active">
  Guides
</a></div><div class="nav-item"><a href="/js-uprtcl/modules/" class="nav-link">
  Modules
</a></div><div class="nav-item"><a href="/js-uprtcl/resources/" class="nav-link">
  Resources
</a></div><div class="nav-item"><a href="https://github.com/uprtcl/js-uprtcl" target="_blank" rel="noopener noreferrer" class="nav-link external">
  Github
  <svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a></div> <!----></nav>  <ul class="sidebar-links"><li><a href="/js-uprtcl/guides/" class="sidebar-link">Introduction</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading open"><span>Using MicroModules</span> <span class="arrow down"></span></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/js-uprtcl/guides/use/installing-the-micro-orchestrator.html" class="sidebar-link">Installing the MicroOrchestrator</a></li><li><a href="/js-uprtcl/guides/use/loading-micro-modules.html" class="active sidebar-link">Loading MicroModules</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js-uprtcl/guides/use/loading-micro-modules.html#about-micromodules" class="sidebar-link">About MicroModules</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/js-uprtcl/guides/use/loading-micro-modules.html#dependencies" class="sidebar-link">Dependencies</a></li><li class="sidebar-sub-header"><a href="/js-uprtcl/guides/use/loading-micro-modules.html#functionality" class="sidebar-link">Functionality</a></li></ul></li><li class="sidebar-sub-header"><a href="/js-uprtcl/guides/use/loading-micro-modules.html#installing-and-loading-micromodules" class="sidebar-link">Installing and loading MicroModules</a></li></ul></li></ul></section></li><li><a href="/js-uprtcl/guides/using-the-evees-module.html" class="sidebar-link">Using the Evees module</a></li><li><a href="/js-uprtcl/guides/developing-micro-modules.html" class="sidebar-link">Developing MicroModules</a></li><li><section class="sidebar-group collapsable depth-0"><p class="sidebar-heading"><span>Developing Cortex modules</span> <span class="arrow right"></span></p> <!----></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="loading-micromodules"><a href="#loading-micromodules" class="header-anchor">#</a> Loading MicroModules</h1> <h2 id="about-micromodules"><a href="#about-micromodules" class="header-anchor">#</a> About MicroModules</h2> <p><code>MicroModules</code> are a flexible and composable way of <strong>adding a slice of functionality</strong> to your web application. One of their main functions is to <strong>register dependencies globally</strong> within two main registries:</p> <ul><li>The <a href="https://github.com/inversify/InversifyJS" target="_blank" rel="noopener noreferrer">InversifyJS<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> container inside the <code>micro-orchestrator</code></li> <li>The <a href="https://developers.google.com/web/fundamentals/web-components/customelements" target="_blank" rel="noopener noreferrer">customElements<svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" x="0px" y="0px" viewBox="0 0 100 100" width="15" height="15" class="icon outbound"><path fill="currentColor" d="M18.8,85.1h56l0,0c2.2,0,4-1.8,4-4v-32h-8v28h-48v-48h28v-8h-32l0,0c-2.2,0-4,1.8-4,4v56C14.8,83.3,16.6,85.1,18.8,85.1z"></path> <polygon fill="currentColor" points="45.7,48.7 51.3,54.3 77.2,28.5 77.2,37.2 85.2,37.2 85.2,14.9 62.8,14.9 62.8,22.9 71.5,22.9"></polygon></svg></a> registry present in the browser</li></ul> <h3 id="dependencies"><a href="#dependencies" class="header-anchor">#</a> Dependencies</h3> <p>One of the main features of <code>MicroModules</code> is that they can declare dependencies and submodules. This is to make sure that multiple modules can depend on the same base one, without loading the base module every time that we include a dependant module.</p> <p>This means that we should be careful when importing and using them. <strong>If we try to load a module without having already loaded its dependencies, the module loading will fail</strong>. This applies to all submodules as well: any dependency specified by a submodule must be present in the application for the module to load.</p> <h3 id="functionality"><a href="#functionality" class="header-anchor">#</a> Functionality</h3> <p>Each <code>MicroModule</code> <strong>functionally acts as a coherent unit</strong> composed of different parts that can work together to cover certain functionality, often dealing with a common domain of data.</p> <p>For example, some modules <strong>could register GraphQl schema parts</strong> that query documents and some <strong>backend provider</strong> for those documents, and also <strong>custom elements that query documents</strong> data and are able to display it.</p> <h2 id="installing-and-loading-micromodules"><a href="#installing-and-loading-micromodules" class="header-anchor">#</a> Installing and loading <code>MicroModules</code></h2> <p>Every <code>MicroModule</code> will have different configuration processes, dependencies or requirements. In general terms, we can follow this process:</p> <ol start="0"><li><p>Choose which <code>MicroModules</code> you want to install in your app.</p></li> <li><p>Install the required npm package for your module:</p></li></ol> <div class="language-bash extra-class"><pre class="language-bash"><code><span class="token function">npm</span> <span class="token function">install</span> @uprtcl/documents
</code></pre></div><ol start="2"><li>Import and configure the <code>MicroModule</code>:</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> IpfsStore <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@uprtcl/ipfs-provider'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DocumentsModule<span class="token punctuation">,</span> DocumentsIpfs <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@uprtcl/documents'</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ipfsConfig <span class="token operator">=</span> <span class="token punctuation">{</span> host<span class="token operator">:</span> <span class="token string">'ipfs.infura.io'</span><span class="token punctuation">,</span> port<span class="token operator">:</span> <span class="token number">5001</span><span class="token punctuation">,</span> protocol<span class="token operator">:</span> <span class="token string">'https'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ipfsStore <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">IpfsStore</span><span class="token punctuation">(</span>ipfsConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> docs <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">DocumentsModule</span><span class="token punctuation">(</span><span class="token punctuation">[</span>ipfsStore<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><ol start="3"><li>Make sure that all dependency modules for your module are already configured and loaded:</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">import</span> <span class="token punctuation">{</span> ApolloClientModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@uprtcl/graphql'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> i18nextBaseModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@uprtcl/micro-orchestrator'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> DiscoveryModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@uprtcl/multiplatform'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> CortexModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@uprtcl/cortex'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> LensesModule <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@uprtcl/lenses'</span><span class="token punctuation">;</span>
<span class="token keyword">import</span> <span class="token punctuation">{</span> EveesModule<span class="token punctuation">,</span> EveesHttp<span class="token punctuation">,</span> EveesEthereum <span class="token punctuation">}</span> <span class="token keyword">from</span> <span class="token string">'@uprtcl/evees'</span><span class="token punctuation">;</span>
  
<span class="token keyword">const</span> ipfsCidConfig <span class="token operator">=</span> <span class="token punctuation">{</span> version<span class="token operator">:</span> <span class="token number">1</span><span class="token punctuation">,</span> <span class="token keyword">type</span><span class="token operator">:</span> <span class="token string">'sha2-256'</span><span class="token punctuation">,</span> codec<span class="token operator">:</span> <span class="token string">'raw'</span><span class="token punctuation">,</span> base<span class="token operator">:</span> <span class="token string">'base58btc'</span> <span class="token punctuation">}</span><span class="token punctuation">;</span>

<span class="token keyword">const</span> ethConnection <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EthereumConnection</span><span class="token punctuation">(</span><span class="token punctuation">{</span> provider<span class="token operator">:</span> <span class="token string">''</span> <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token keyword">const</span> ethEvees <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">EveesEthereum</span><span class="token punctuation">(</span>ethConnection<span class="token punctuation">,</span> ipfsConfig<span class="token punctuation">,</span> ipfsCidConfig<span class="token punctuation">)</span><span class="token punctuation">;</span>

<span class="token keyword">await</span> orchestrator<span class="token punctuation">.</span><span class="token function">loadModules</span><span class="token punctuation">(</span><span class="token punctuation">[</span>
  <span class="token keyword">new</span> <span class="token class-name">ApolloClientModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">i18nextBaseModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">DiscoveryModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">CortexModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">LensesModule</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">,</span>
  <span class="token keyword">new</span> <span class="token class-name">EveesModule</span><span class="token punctuation">(</span><span class="token punctuation">[</span>ethEvees<span class="token punctuation">,</span> httpEvees<span class="token punctuation">]</span><span class="token punctuation">,</span> ethEvees<span class="token punctuation">)</span>
<span class="token punctuation">]</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div><p>Normally these base modules are only loaded once, but used by a lot of different modules.</p> <ol start="4"><li>Load the module in the <code>MicroOrchestrator</code>:</li></ol> <div class="language-ts extra-class"><pre class="language-ts"><code><span class="token keyword">await</span> orchestrator<span class="token punctuation">.</span><span class="token function">loadModule</span><span class="token punctuation">(</span>docs<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
      ←
      <a href="/js-uprtcl/guides/use/installing-the-micro-orchestrator.html" class="prev">
        Installing the MicroOrchestrator
      </a></span> <span class="next"><a href="/js-uprtcl/guides/using-the-evees-module.html">
        Using the Evees module
      </a>
      →
    </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/js-uprtcl/assets/js/app.bc6e032e.js" defer></script><script src="/js-uprtcl/assets/js/2.9a3fecf1.js" defer></script><script src="/js-uprtcl/assets/js/18.a2ee037d.js" defer></script>
  </body>
</html>
